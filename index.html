<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive eBook</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; font-size: 16px; }
    .word { color: blue; cursor: pointer; position: relative; user-select: none; display: inline-block; }
    .word.active .tooltip { display: block; }
    .tooltip {
      display: none;
      position: absolute;
      background: #f0f0f0;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
      top: 25px;
      left: 0;
      width: 280px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      z-index: 1000;
    }
    h2 { margin-top: 40px; }
    .back-link { display: block; margin-top: 20px; }
    nav a { display: block; margin: 4px 0; color: darkgreen; text-decoration: none; }
    .controls { margin: 20px 0; }
    .controls input, .controls button { margin: 5px; padding: 6px 12px; }
    #progress { font-weight: bold; margin-bottom: 10px; color: darkred; }
    .bookmarked { background: #ffffcc; padding: 3px 6px; }
  </style>
</head>
<body>

<h1 id="top">📚 Interactive English eBook</h1>
<div id="progress">Progress: 0 / 0 words learned</div>

<div class="controls">
  🔍 Search word: <input type="text" id="searchInput" placeholder="Type a word...">
  <button onclick="searchWord()">Search</button>
  <button onclick="showBookmarks()">📑 Show Bookmarks</button>
  <button onclick="reviewWords()">🧠 Review Words</button>
</div>

<h2>📌 Table of Contents</h2>
<nav>
  <a href="#chapter2">🌳 Chapter 2: Nature</a>
  <a href="#chapter3">💻 Chapter 3: Technology</a>
</nav>

<hr>

<h2 id="chapter2">🌳 Chapter 2: Nature <button onclick="bookmarkChapter('chapter2')">🔖 Bookmark</button></h2>
<p>
  The 
  <span class="word" data-word="sun">
    sun
    <span class="tooltip">
      <strong>Sun</strong>: The star at the center of the solar system.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"></audio>
    </span>
  </span>
  shines brightly. Trees need 
  <span class="word" data-word="light">
    light
    <span class="tooltip">
      <strong>Light</strong>: A form of energy that makes things visible.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"></audio>
    </span>
  </span>
  to grow.
</p>

<h2 id="chapter3">💻 Chapter 3: Technology <button onclick="bookmarkChapter('chapter3')">🔖 Bookmark</button></h2>
<p>
  We use 
  <span class="word" data-word="computers">
    computers
    <span class="tooltip">
      <strong>Computers</strong>: Machines used for processing information.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"></audio>
    </span>
  </span>
  every day. The internet helps us 
  <span class="word" data-word="connect">
    connect
    <span class="tooltip">
      <strong>Connect</strong>: To link or join together.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"></audio>
    </span>
  </span>
  with others.
</p>

<script>
  const learned = new Set(JSON.parse(localStorage.getItem('learnedWords') || '[]'));
  const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');

  function updateProgress() {
    const allWords = document.querySelectorAll('.word');
    const learnedCount = [...learned].length;
    document.getElementById('progress').textContent =
      `Progress: ${learnedCount} / ${allWords.length} words learned`;
  }

  function searchWord() {
    const input = document.getElementById('searchInput').value.trim().toLowerCase();
    if (!input) return;
    const word = [...document.querySelectorAll('.word')].find(w => w.dataset.word === input);
    if (word) {
      word.scrollIntoView({ behavior: 'smooth', block: 'center' });
      word.classList.add('active');
      setTimeout(() => word.classList.remove('active'), 2000);
    } else {
      alert('Word not found.');
    }
  }

  function bookmarkChapter(id) {
    if (!bookmarks.includes(id)) {
      bookmarks.push(id);
      localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
      alert('Chapter bookmarked!');
    }
  }

  function showBookmarks() {
    if (bookmarks.length === 0) {
      alert("No bookmarks yet.");
      return;
    }
    bookmarks.forEach(id => {
      const section = document.getElementById(id);
      if (section) section.classList.add('bookmarked');
    });
    alert('Bookmarked chapters highlighted.');
  }

  function reviewWords() {
    if (learned.size === 0) {
      alert("No learned words yet.");
      return;
    }
    alert("Learned words: " + [...learned].join(', '));
  }

  document.querySelectorAll('.word').forEach(word => {
    word.addEventListener('click', () => {
      document.querySelectorAll('.word').forEach(w => w.classList.remove('active'));
      word.classList.add('active');
      const key = word.dataset.word;
      if (key && !learned.has(key)) {
        learned.add(key);
        localStorage.setItem('learnedWords', JSON.stringify([...learned]));
        updateProgress();
      }
    });
  });

  updateProgress();
</script>

</body>
</html>