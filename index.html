<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive eBook</title>
  <style>
    body {
  font-family: Arial, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  padding: 20px;
}
.word {
  color: blue;
  cursor: pointer;
  position: relative;
  user-select: none;
  display: inline;          /* ä¿æŒä¸æ­£æ–‡å®Œå…¨ä¸€è‡´ */
  font-size: inherit;       /* ç»§æ‰¿çˆ¶å…ƒç´ å­—ä½“å¤§å° */
  line-height: inherit;     /* ä¿è¯å¯¹é½ */
  font-family: inherit;     /* ä¿è¯å­—ä½“æ ·å¼ä¸€è‡´ */
}
    .word.active .tooltip { display: block; }
    .tooltip {
      display: none;
      position: absolute;
      background: #f0f0f0;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
      top: 25px;
      left: 0;
      width: 280px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      z-index: 1000;
    }
    h2 { margin-top: 40px; }
    .back-link { display: block; margin-top: 20px; }
    nav a { display: block; margin: 4px 0; color: darkgreen; text-decoration: none; }
    .controls { margin: 20px 0; }
    .controls input, .controls button { margin: 5px; padding: 6px 12px; }
    #progress { font-weight: bold; margin-bottom: 10px; color: darkred; }
    .bookmarked { background: #ffffcc; padding: 3px 6px; }
  </style>
</head>
<body>

<h1 id="top">ğŸ“š Interactive English eBook</h1>
<div id="progress">Progress: 0 / 0 words learned</div>

<div class="controls">
  ğŸ” Search word: <input type="text" id="searchInput" placeholder="Type a word...">
  <button onclick="searchWord()">Search</button>
  <button onclick="showBookmarks()">ğŸ“‘ Show Bookmarks</button>
  <button onclick="reviewWords()">ğŸ§  Review Words</button>
</div>

<h2>Table of Contents</h2>
<nav>
  <a href="#chapter2">Chapter 2: Nature</a>
  <a href="#chapter3">Chapter 3: Technology</a>
</nav>

<hr>

<h2 id="chapter2">Chapter 2: Nature <button onclick="bookmarkChapter('chapter2')">ğŸ”– Bookmark</button></h2>
<p>
  The 
  <span class="word" data-word="sun">
    sun
    <span class="tooltip">
      <strong>Sun</strong>: The star at the center of the solar system.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"></audio>
    </span>
  </span>
  shines brightly. Trees need 
  <span class="word" data-word="light">
    light
    <span class="tooltip">
      <strong>Light</strong>: A form of energy that makes things visible.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"></audio>
    </span>
  </span>
  to grow.
</p>

<h2 id="chapter3">ğŸ’» Chapter 3: Technology <button onclick="bookmarkChapter('chapter3')">ğŸ”– Bookmark</button></h2>
<p>
  We use 
  <span class="word" data-word="computers">
    computers
    <span class="tooltip">
      <strong>Computers</strong>: Machines used for processing information.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"></audio>
    </span>
  </span>
  every day. The internet helps us 
  <span class="word" data-word="connect">
    connect
    <span class="tooltip">
      <strong>Connect</strong>: To link or join together.
      <br><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"></audio>
    </span>
  </span>
  with others.
</p>

<script>
  // å•è¯ç‚¹å‡»æ˜¾ç¤º tooltipï¼Œå¹¶ç»Ÿè®¡å·²å­¦å•è¯
  const words = document.querySelectorAll('.word');
  const learnedWords = new Set();

  words.forEach(word => {
    word.addEventListener('click', (e) => {
      e.stopPropagation();
      words.forEach(w => w.classList.remove('active'));
      word.classList.add('active');
      learnedWords.add(word.getAttribute('data-word'));
      updateProgress();
    });
  });

  // ç‚¹å‡»ç©ºç™½å…³é—­ tooltipï¼ˆåªæ³¨å†Œä¸€æ¬¡ï¼‰
  document.addEventListener('click', () => {
    words.forEach(w => w.classList.remove('active'));
  });

  function updateProgress() {
    document.getElementById('progress').innerText =
      `Progress: ${learnedWords.size} / ${words.length} words learned`;
  }

  function searchWord() {
    const input = document.getElementById('searchInput').value.trim().toLowerCase();
    for (let word of words) {
      const w = word.getAttribute('data-word').toLowerCase();
      if (w === input) {
        word.scrollIntoView({ behavior: 'smooth', block: 'center' });
        word.classList.add('active');
        return;
      }
    }
    alert("Word not found.");
  }

  function bookmarkChapter(id) {
    localStorage.setItem(`bookmark-${id}`, true);
    alert("Bookmarked!");
  }

  function showBookmarks() {
    let bookmarked = "";
    for (let key in localStorage) {
      if (key.startsWith("bookmark-")) {
        bookmarked += `ğŸ”– ${key.replace("bookmark-", "")}\n`;
      }
    }
    alert(bookmarked || "No bookmarks yet.");
  }

  function reviewWords() {
    if (learnedWords.size === 0) {
      alert("You haven't learned any words yet.");
    } else {
      alert("Learned words:\n" + [...learnedWords].join(", "));
    }
  }
</script>

</body>
</html>