<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive eBook</title>
  <style>
    body { font-family: Arial; padding: 20px; line-height: 1.6; }
    .word { color: blue; cursor: pointer; position: relative; user-select: none; display: inline-block; }
    .word:focus { outline: 2px dashed #888; }
    .tooltip {
      display: none;
      position: absolute;
      background: #f0f0f0;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
      top: 25px;
      left: 0;
      width: 280px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      z-index: 1000;
    }
    .word.active .tooltip { display: block; }
    h2 { margin-top: 40px; }
    .back-link { display: block; margin-top: 20px; }
    nav a { display: block; margin: 4px 0; color: darkgreen; text-decoration: none; }
    .controls { margin: 20px 0; }
    .controls input, .controls button { margin: 5px; padding: 6px 12px; }
    #progress { font-weight: bold; margin-bottom: 10px; color: darkred; }
  </style>
</head>
<body>

<h1 id="top">ğŸ“š Interactive English eBook</h1>
<div id="progress">Progress: 0 / 0 words learned</div>

<div class="controls">
  ğŸ” Search word: <input type="text" id="searchInput" placeholder="Type a word...">
  <button onclick="searchWord()">Search</button>
  <button onclick="showBookmarks()">ğŸ“‘ Show Bookmarks</button>
  <button onclick="reviewWords()">ğŸ§  Review Words</button>
</div>

<h2>ğŸ“Œ Table of Contents</h2>
<nav>
  <a href="#chapter1">BBC 6 Minute English â€“ Crunchy Food</a>
  <a href="#chapter2">Chapter 2: Nature</a>
  <a href="#chapter3">Chapter 3: Technology</a>
</nav>

<p>
  <span class="word" tabindex="0" role="tooltip">hello
    <span class="tooltip">
      <strong>Hello</strong>: A greeting used when meeting someone.
      <br><br>
      <audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="none"></audio>
    </span>
  </span>
  to learn more.
</p>
<a class="back-link" href="#top">ğŸ”™ Back to Table of Contents</a>

<hr>

<h2 id="chapter2">ğŸŒ³ Chapter 2: Nature <button onclick="bookmarkChapter('chapter2')">ğŸ”– Bookmark</button></h2>
<p>
  The 
  <span class="word" tabindex="0" role="tooltip">sun
    <span class="tooltip">
      <strong>Sun</strong>: The star at the center of the solar system.
      <br><br>
      <audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" preload="none"></audio>
    </span>
  </span>
  shines brightly in the sky. Trees need 
  <span class="word" tabindex="0" role="tooltip">light
    <span class="tooltip">
      <strong>Light</strong>: A form of energy that makes things visible.
      <br><br>
      <audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" preload="none"></audio>
    </span>
  </span>
  to grow.
</p>

<h2 id="chapter3">ğŸ’» Chapter 3: Technology <button onclick="bookmarkChapter('chapter3')">ğŸ”– Bookmark</button></h2>
<p>
  We use 
  <span class="word" tabindex="0" role="tooltip">computers
    <span class="tooltip">
      <strong>Computers</strong>: Machines used for processing information.
      <br><br>
      <audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3" preload="none"></audio>
    </span>
  </span>
  every day. The internet helps us learn and 
  <span class="word" tabindex="0" role="tooltip">connect
    <span class="tooltip">
      <strong>Connect</strong>: To link or join together.
      <br><br>
      <audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3" preload="none"></audio>
    </span>
  </span>
  with others.
</p>

<a class="back-link" href="#top">ğŸ”™ Back to Table of Contents</a>

<!-- JavaScript åŠŸèƒ½åŒº -->
<script>
  const words = document.querySelectorAll('.word');
  const progressDisplay = document.getElementById('progress');
  const learnedWords = new Set(JSON.parse(localStorage.getItem('learnedWords') || '[]'));

  function updateProgress() {
    progressDisplay.textContent = `Progress: ${learnedWords.size} / ${words.length} words learned`;
  }

  words.forEach(word => {
    const text = word.textContent.trim();
    
    word.addEventListener('click', e => {
      e.stopPropagation();
      words.forEach(w => { if (w !== word) w.classList.remove('active'); });
      word.classList.toggle('active');
      
      // æ·»åŠ åˆ°å·²å­¦ä¹ å•è¯åˆ—è¡¨
      learnedWords.add(text);
      localStorage.setItem('learnedWords', JSON.stringify([...learnedWords]));
      updateProgress();
    });

    word.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        word.click();
      }
    });

    // æ‰‹æœºç«¯è§¦æ‘¸æ”¯æŒ
    word.addEventListener('touchstart', () => {
      word.click();
    });
  });

  document.addEventListener('click', () => {
    words.forEach(w => w.classList.remove('active'));
  });

  function searchWord() {
    const input = document.getElementById('searchInput').value.trim().toLowerCase();
    words.forEach(word => {
      if (word.textContent.trim().toLowerCase() === input) {
        word.scrollIntoView({ behavior: 'smooth', block: 'center' });
        word.classList.add('active');
      }
    });
  }

  function reviewWords() {
    alert("Words youâ€™ve learned:\n\n" + [...learnedWords].join(', '));
  }

  function bookmarkChapter(id) {
    let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
    if (!bookmarks.includes(id)) {
      bookmarks.push(id);
      localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
      alert("âœ… Chapter bookmarked!");
    } else {
      alert("ğŸ”– Already bookmarked.");
    }
  }

  function showBookmarks() {
    let bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
    if (bookmarks.length === 0) {
      alert("No bookmarks yet.");
    } else {
      alert("ğŸ“Œ Bookmarked chapters:\n" + bookmarks.join('\n'));
    }
  }

  updateProgress(); // åˆå§‹åŠ è½½è¿›åº¦
</script>

</body>
</html>
